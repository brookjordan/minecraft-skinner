function buildMen(){for(i=0;i<menElts.length;i+=1)men[i]=buildMan(menElts[i],i,imageElt)}function buildMan(a,b,c){var d=men[b]||{img:c,elt:a,partElts:a.querySelectorAll("part"),parts:[],no:b,timesBuilt:0,rot:{y:45,ySpd:3,x:0,xSpd:3}},e=0;for(d.timesBuilt+=1;e<d.partElts.length;e+=1)d.parts[e]=buildPart(d,e);return d.timesBuilt<=1&&moveMan(d,!0),d}function buildPart(a,b){var c=a.partElts[b],d=[{sx:1,x:0,y:-12,z:0,ox:0,oy:0,oz:0},{sx:1,x:0,y:-2,z:0,ox:0,oy:0,oz:0},{sx:1,x:-6,y:-2,z:0,ox:2,oy:-6,oz:0},{sx:-1,x:-6,y:-2,z:0,ox:2,oy:-6,oz:0},{sx:1,x:-2,y:10,z:0,ox:2,oy:-6,oz:0},{sx:-1,x:-2,y:10,z:0,ox:2,oy:-6,oz:0}],e={elt:c,joint:c.getElementsByTagName("joint")[0]||document.createElement("joint"),faces:[],width:c.getAttribute("width")*scaler,height:c.getAttribute("height")*scaler,depth:c.getAttribute("depth")*scaler,img:a.img,no:b,position:d[b]},f=0;for(e.elt.style[tf]="scaleX("+e.position.sx+")translateX("+e.position.x*scaler+"px)translateY("+e.position.y*scaler+"px)translateZ("+e.position.z*scaler+"px)",e.joint.innerHTML="",e.joint.style[tfo]=e.position.ox*scaler+"px "+e.position.oy*scaler+"px "+e.position.oz*scaler+"px";6>f;f+=1)e.faces[f]=buildFace(a,e,f);return e.elt.appendChild(e.joint),e}function buildFace(a,b,c){var d=b.joint,e=["translate3d("+(-b.width/2+"px, "+-b.height/2+"px, "+b.depth/2+"px")+")","translate3d("+(-b.width/2+"px, "+-b.height/2+"px, -"+b.depth/2+"px")+")","translate3d("+(-b.width/2-b.depth/2+"px, "+-b.height/2+"px, 0")+")","translate3d("+(b.width/2-b.depth/2+"px, "+-b.height/2+"px, 0")+")","translate3d("+(-b.width/2+"px, "+(-b.depth/2-b.height/2)+"px, 0")+")","translate3d("+(-b.width/2+"px, "+(b.height/2-b.depth/2)+"px, 0")+")"],f=["","rotateY( 180deg )","rotateY( -90deg )","rotateY(  90deg )","rotateX(  90deg )","rotateX( -90deg )"],g=[[[8,8],[24,8],[0,8],[16,8],[8,0],[16,0]],[[20,20],[32,20],[16,20],[28,20],[20,16],[28,16]],[[44,20],[52,20],[40,20],[48,20],[44,16],[48,16]],[[44,20],[52,20],[40,20],[48,20],[44,16],[48,16]],[[4,20],[12,20],[0,20],[8,20],[4,16],[8,16]],[[4,20],[12,20],[0,20],[8,20],[4,16],[8,16]]],h=document.createElement("canvas");return face={elt:h,ctx:h.getContext("2d"),width:2>c?b.width:4>c?b.depth:b.width,height:2>c?b.height:4>c?b.height:b.depth,translate:e[c],rotate:f[c]},face.elt.style.cssText=pf+"transform-origin:"+face.width/2+"px "+face.height/2+"px;"+pf+"transform: "+face.translate+" "+face.rotate+";width: "+face.width+"px;height: "+face.height+"px;",h.width=face.width*ctxResolution/scaler,h.height=face.height*ctxResolution/scaler,face.ctx.imageSmoothingEnabled=!1,face.ctx.drawImage(a.img,g[b.no][c][0],g[b.no][c][1],face.width/scaler,face.height/scaler,0,0,h.width,h.height),d.appendChild(face.elt),face}function moveMan(a,b){var c="translateY("+0*scaler+"px) ";b=b?!0:!1,(rotateXOn||rotateYOn||b)&&(rotateXOn&&(a.rot.y+=a.rot.ySpd*rotateXOn),rotateYOn&&(a.rot.x+=a.rot.xSpd*rotateYOn),a.elt.style[tf]=c+"rotateY("+a.rot.y+"deg) rotateX("+a.rot.x+"deg)"),requestAnimationFrame(function(){moveMan(a)})}function setAnimation(){/\bwalking\b/.test(document.body.className)?(document.body.classList.remove("walking"),document.body.classList.add("running")):/\brunning\b/.test(document.body.className)?document.body.classList.remove("running"):document.body.classList.add("walking")}var BJSliders=function(){function a(a){function b(a){a.preventDefault(),h=j.value,i=BJ.pageX(a),addEventListener("mousemove",d,!1),window.addEventListener("touchmove",d,!1),window.addEventListener("mouseup",c,!1),window.addEventListener("touchend",c,!1)}function c(a){a.preventDefault(),window.removeEventListener("mousemove",d,!1),window.removeEventListener("touchmove",d,!1),window.removeEventListener("mouseup",c,!1),window.removeEventListener("touchend",c,!1)}function d(a){a.preventDefault(),j.value=h+(BJ.pageX(a)-i)*j.step,e(),g()}function e(){var a=100/j.range,b=Math.max(j.min,Math.min(j.value,j.max));j.value=b,l.style.left=(j.value-j.min)*a+"%"}function f(a){m.push(a)}function g(){for(var a=0;a<m.length;a+=1)m[a](j)}var h,i,j={},k=document.createElement("div"),l=document.createElement("button"),m=[];return k.className="BJSlider__bar",l.className="BJSlider__knob",a.appendChild(k),a.appendChild(l),l.addEventListener("mousedown",b,!1),l.addEventListener("touchstart",b,!1),j.elt=a,j.bar=k,j.knob=l,j.value=+a.getAttribute("data-value")||0,j.min=+a.getAttribute("data-min")||0,j.max=+a.getAttribute("data-max")||100,j.range=j.max-j.min,j.step=+a.getAttribute("data-step")||1,j.id=a.getAttribute("data-id")||"",j.onchange=f,e(),j}function b(a,b){var c,d=0;for(b=b||"";d<e.length;)c=e[d],c.id===b&&c.onchange(a),d+=1;return f}var c,d=document.querySelectorAll(".BJSlider"),e=[],f={};for(c=0;c<d.length;c+=1)e.push(a(d[c]));return f.sliders=e,f.onchange=b,f}(),BJ=function(){function a(a){return a.touches&&a.touches[0]?a.touches[0].pageX:a.pageX}function b(a){var b=a.match(/[a-zA-Z0-9]{2}/g),c=parseInt(b[0],16),d=parseInt(b[1],16),e=parseInt(b[2],16),f=c+","+d+","+e;return f}var c={};return c.pageX=a,c.hex2rgb=b,c}(),menuSystem=function(a){function b(a){var b="menu-"+a,d=document.querySelector("."+b),e={};return e.name=a,d&&(e.elt=d,e.toggler=d.querySelector(".toggler"),e.optionsWrapper=d.querySelector("."+f(e)),e.optionsContainer=d.querySelector("."+g(e)),e.options=d.querySelector("."+h(e)),c(e)),e}function c(a){var b=d(a);k.classList.add(e(a,"closed")),a.toggler.addEventListener("click",b,!1)}function d(a){var b=e(a,"closed"),c=e(a,"open"),d=new RegExp(b);return function(){d.test(k.className)?(k.classList.remove(b),k.classList.add(c)):(k.classList.remove(c),k.classList.add(b))}}function e(a,b,c){return"menu-"+a.name+(c?"__"+c:"")+(b?"--"+b:"")}function f(a,b){return e(a,b,"optionsWrapper")}function g(a,b){return e(a,b,"optionsContainer")}function h(a,b){return e(a,b,"options")}function i(){{var a=m[0].optionsWrapper,b=m[0].optionsContainer,c=m[0].options;c.clientWidth,b.clientWidth}b.scrollLeft<1?a.classList.add("atStart"):a.classList.remove("atStart"),c.clientWidth<=b.clientWidth||b.clientWidth+b.scrollLeft>=c.clientWidth?a.classList.add("atEnd"):a.classList.remove("atEnd")}var j,k=document.body,l="tools saves preview".split(" "),m=[],n={};for(j=0;j<l.length;j+=1)m.push(b(l[j]));return i(),m[0].optionsContainer.addEventListener("scroll",i,!1),a.addEventListener("resize",i,!1),n.parts=m,n}(window);BJSliders.onchange(function(a){document.querySelector(".menu-tools__options__option-size .value__number").innerHTML=a.value},"size").onchange(function(a){document.querySelector(".menu-tools__options__option-opacity .value__number").innerHTML=a.value},"opacity").onchange(function(a){document.querySelector(".menu-tools__options__option-maxSpacing .value__number").innerHTML=a.value},"maxSpacing");var dropBox=function(a){function b(a){a.preventDefault&&a.preventDefault(),g.classList.add("hover")}function c(a){a.preventDefault&&a.preventDefault(),g.classList.remove("hover")}function d(b){b.preventDefault&&b.preventDefault(),g.classList.remove("hover");var c=b.dataTransfer.files,d=new FileReader;d.onload=function(b){a(b)},d.readAsDataURL(c[0])}var e={},f=document.documentElement,g=document.getElementById("dropOverlay");return f.ondragover=b,f.ondragleave=c,f.addEventListener("drop",d,!1),e},artBoard=function(){function a(a){v=r.getBoundingClientRect();var d=c(v,a);k=D*w/2,l="rgba("+BJ.hex2rgb(C)+","+E+")",m=k*(F/100),r.classList.add("drawing"),n=d,f(d.x,d.y),window.addEventListener("mousemove",e,!1),window.addEventListener("mouseup",b,!1)}function b(){window.removeEventListener("mousemove",e,!1),window.removeEventListener("mouseup",b,!1),r.classList.remove("drawing"),d(),o()}function c(a,b){var c=a.getBoundingClientRect?a.getBoundingClientRect():a,d=(b.clientX-c.left+window.scrollX)*w,e=(b.clientY-c.top+window.scrollY)*w;return{x:d,y:e}}function d(){u.drawImage(r,0,0,s.width,s.height)}function e(a){for(var b,d=c(v,a),e={x:d.x-n.x,y:d.y-n.y,total:Math.pow(Math.pow(n.x-d.x,2)+Math.pow(n.y-d.y,2),.5)},g=Math.ceil(e.total/m),h=1;g>=h;h++)b={x:n.x+e.x/g*h,y:n.y+e.y/g*h},f(n.x+e.x/g*h,n.y+e.y/g*h);n=d}function f(a,b){t.beginPath(),t.arc(a,b,k,0,2*Math.PI,!1),t.fillStyle=l,t.fill()}function g(){}function h(a){var b=new Image;b.onload=function(){t.drawImage(b,0,0,r.width,r.height),d(),o()},b.src=a.target.result}function i(a,b){var c={func:a};"string"==typeof b&&(c.className=b),q.push(c)}function j(){var a=document.createElement("a"),b=new Image,c=r.toDataURL();b.src=c,a.href=c,a.appendChild(b),a.setAttribute("target","_blank"),a.setAttribute("download","download"),a.style.display="block",b.style.width=a.style.width="100%",b.style.height="auto",G.appendChild(a)}var k,l,m,n,o=function(){var a,b=[];return function(c){if("function"==typeof c)b.push(c);else for(a=0;a<b.length;a+=1)b[0]()}}(),p={},q=[],r=document.getElementById("canvas"),s=document.getElementById("canvas_default"),t=r.getContext("2d"),u=s.getContext("2d"),v=r.getBoundingClientRect(),w=window.devicePixelRatio,x=r.parentNode,y={x:64,y:32},z={x:Math.floor(x.getBoundingClientRect().width/y.x),y:Math.floor(x.getBoundingClientRect().height/y.y)},A=z.x<=z.y?{x:z.x*y.x,y:z.x*y.y}:{x:z.y*y.x,y:z.y*y.y},B=(dropBox(h),document.getElementById("brushColor")),C=B.value,D=3,E=100,F=25,G=document.getElementById("imageThumbs");return r.width=A.x*w,r.height=A.y*w,r.style.width=A.x+"px",r.style.height=A.y+"px",t.webkitImageSmoothingEnabled=!1,s.width=y.x,s.height=y.y,s.style.width=s.width+"px",s.style.height=s.height+"px",r.addEventListener("mousedown",a,!1),p.replaceImage=g,p.onimageupdate=i,p.getImage=j,p.ondrawend=o,p.art=s,BJSliders.onchange(function(a){D=a.value},"size").onchange(function(a){E=a.value/100},"opacity").onchange(function(a){F=a.value},"maxSpacing"),B.addEventListener("change",function(){C=B.value},!1),p}(),menElts=document.querySelectorAll("man"),men=[],i=0,ctxResolution=8,scaler=9,rotateXOn=0,rotateYOn=0,imageElt,tf,prefix;"string"==typeof document.body.style.transform?(tf="transform",tfo="transformOrigin",pf=""):"string"==typeof document.body.style.WebkitTransform?(tf="WebkitTransform",tfo="WebkitTransformOrigin",pf="-webkit-"):(tf="",pf=""),window.onkeydown=function(a){var b=!1;39===a.which?(rotateXOn=1,b=!0):37===a.which?(rotateXOn=-1,b=!0):40===a.which?(rotateYOn=-1,b=!0):38===a.which?(rotateYOn=1,b=!0):32===a.which&&(setAnimation(),b=!0),b&&a.preventDefault()},window.onkeyup=window.ontouchend=window.onmouseup=window.onmouseleave=function(){rotateXOn=0,rotateYOn=0},document.getElementsByClassName("func")[0].ontouchstart=document.getElementsByClassName("func")[0].onmousedown=function(a){a.preventDefault(),setAnimation()},document.getElementsByClassName("up")[0].ontouchstart=document.getElementsByClassName("up")[0].onmousedown=function(a){a.preventDefault(),rotateYOn=1},document.getElementsByClassName("down")[0].ontouchstart=document.getElementsByClassName("down")[0].onmousedown=function(a){a.preventDefault(),rotateYOn=-1},document.getElementsByClassName("left")[0].ontouchstart=document.getElementsByClassName("left")[0].onmousedown=function(a){a.preventDefault(),rotateXOn=-1},document.getElementsByClassName("right")[0].ontouchstart=document.getElementsByClassName("right")[0].onmousedown=function(a){a.preventDefault(),rotateXOn=1};
//# sourceMappingURL=main.min.js.map