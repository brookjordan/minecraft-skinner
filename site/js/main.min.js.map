{"version":3,"file":"main.min.js","sources":["../../temp/js/main.js"],"names":["buildMen","i","menElts","length","men","buildMan","imageElt","manElt","manNo","img","man","elt","partElts","querySelectorAll","parts","no","timesBuilt","rot","y","ySpd","x","xSpd","buildPart","moveMan","partNo","partElt","partPositions","sx","z","ox","oy","oz","part","joint","getElementsByTagName","document","createElement","faces","width","getAttribute","scaler","height","depth","position","style","tf","innerHTML","tfo","buildFace","appendChild","faceNo","translates","rotates","draws","canvas","face","ctx","getContext","translate","rotate","cssText","pf","ctxResolution","imageSmoothingEnabled","drawImage","force","defaultMove","rotateXOn","rotateYOn","requestAnimationFrame","setAnimation","test","body","className","classList","remove","add","BJSliders","buildSlider","sliderElt","startDrag","e","preventDefault","prevValue","slider","value","downPos","BJ","pageX","addEventListener","drag","window","endDrag","removeEventListener","step","updateKnobPosition","runChangeFuncs","ratio","range","newValue","Math","max","min","sliderKnob","left","addOnChange","func","onChangeFuncs","push","sliderBar","bar","knob","id","onchange","addOnChangeTo","sliderID","sliders","returnObject","sliderElts","getPageX","touches","hex2rgb","hex","hexParts","match","r","parseInt","g","b","rgb","menuSystem","initiatePart","partName","eltClass","querySelector","name","toggler","optionsWrapper","classOfOptionsWrapper","optionsContainer","classOfOptionsContainer","options","classOfOptions","addPartToggle","togglePartFunction","create_togglePart","classOfMenu","closedClass","openClass","closedTest","RegExp","state","type","checkToolsScroll","clientWidth","scrollLeft","partNames","split","dropBox","loadFunction","addDragClass","dropOverlay","removeDragClass","handleImageDrop","files","dataTransfer","reader","FileReader","onload","readAsDataURL","doc","documentElement","getElementById","ondragover","ondragleave","artBoard","startDrawing","bounds","getBoundingClientRect","setPoint","getPenPosition","brushSize","currentSize","canvasScale","brushColor","currentColor","currentOpacity","drawDistLimit","currentMaxDistance","prevPoint","draw","drawLine","endDrawing","printFullToSmall","ondrawend","target","newX","clientX","scrollX","newY","clientY","top","scrollY","ctx_default","canvas_default","drawPoint","dist","total","pow","ceil","beginPath","arc","PI","fillStyle","fill","replaceImage","loadImageFunction","ii","Image","src","result","addImageLoadFunction","o","imageUpdateFuncs","createImageLink","aaa","iii","dataURL","toDataURL","href","setAttribute","display","imageThumbs","funcs","devicePixelRatio","canvasContainer","parentNode","defaultSkinSize","possibleCanvasScale","floor","canvasSize","colorPicker","webkitImageSmoothingEnabled","onimageupdate","getImage","art","prefix","transform","WebkitTransform","onkeydown","didSomething","which","onkeyup","ontouchend","onmouseup","onmouseleave","getElementsByClassName","ontouchstart","onmousedown"],"mappings":"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","sourcesContent":["var BJSliders = (function(){\n  function buildSlider (sliderElt) {\n\n    function startDrag (e) {\n      e.preventDefault();\n\n      prevValue = slider.value;\n      downPos = BJ.pageX(e);\n\n      addEventListener('mousemove', drag, false);\n      window.addEventListener('touchmove', drag, false);\n      window.addEventListener('mouseup', endDrag, false);\n      window.addEventListener('touchend', endDrag, false);\n    }\n    function endDrag (e) {\n      e.preventDefault();\n\n      window.removeEventListener('mousemove', drag, false);\n      window.removeEventListener('touchmove', drag, false);\n      window.removeEventListener('mouseup', endDrag, false);\n      window.removeEventListener('touchend', endDrag, false);\n    }\n\n    function drag (e) {\n      e.preventDefault();\n\n      slider.value = prevValue + (BJ.pageX(e) - downPos)*slider.step;\n\n      updateKnobPosition();\n      runChangeFuncs();\n    }\n\n    function updateKnobPosition () {\n      var ratio = 100/slider.range,\n          newValue = Math.max( slider.min, Math.min( slider.value, slider.max ) );\n\n      slider.value = newValue;\n\n      sliderKnob.style.left = (slider.value-slider.min)*ratio + '%';\n    }\n\n    function addOnChange (func) {\n      onChangeFuncs.push( func );\n    }\n\n    function runChangeFuncs (func) {\n      var i = 0;\n\n      for (; i<onChangeFuncs.length; i+=1) {\n        onChangeFuncs[i](slider);\n      }\n    }\n\n    var slider = {},\n        sliderBar = document.createElement('div'),\n        sliderKnob = document.createElement('button'),\n        onChangeFuncs = [],\n\n        prevValue,\n        downPos;\n\n    sliderBar.className = 'BJSlider__bar';\n    sliderKnob.className = 'BJSlider__knob';\n\n    sliderElt.appendChild(sliderBar);\n    sliderElt.appendChild(sliderKnob);\n\n    sliderKnob.addEventListener('mousedown', startDrag, false);\n    sliderKnob.addEventListener('touchstart', startDrag, false);\n\n    slider.elt = sliderElt;\n    slider.bar = sliderBar;\n    slider.knob = sliderKnob;\n\n    slider.value = +sliderElt.getAttribute('data-value') || 0;\n    slider.min = +sliderElt.getAttribute('data-min') || 0;\n    slider.max = +sliderElt.getAttribute('data-max') || 100;\n    slider.range = slider.max - slider.min;\n    slider.step = +sliderElt.getAttribute('data-step') || 1;\n    slider.id = sliderElt.getAttribute('data-id') || '';\n\n    slider.onchange = addOnChange;\n\n    updateKnobPosition();\n\n    return slider;\n  }\n\n  function addOnChangeTo (func, sliderID) {\n    var i = 0,\n        slider;\n    sliderID = sliderID || '';\n\n    while (i<sliders.length) {\n      slider = sliders[i];\n\n      if (slider.id === sliderID) {\n        slider.onchange( func );\n      }\n\n      i+=1;\n    }\n\n    return returnObject;\n  }\n\n\n\n  var sliderElts = document.querySelectorAll('.BJSlider'),\n      sliders = [],\n      i,\n\n      returnObject = {};\n\n\n\n  for (i=0; i<sliderElts.length; i+=1) {\n    sliders.push( buildSlider(sliderElts[i]) );\n  }\n\n\n\n  returnObject.sliders = sliders;\n  returnObject.onchange = addOnChangeTo;\n\n  return returnObject;\n}());\n\n\n\n\n// - -- --- -- - -- --- -- - -- --- -- - -- --- -- - //\n\n\n\n\nvar BJ = (function() {\n  function getPageX (e) {\n    return (e.touches && e.touches[0]) ? e.touches[0].pageX : e.pageX;\n  }\n\n  function hex2rgb (hex) {\n    var hexParts = hex.match(/[a-zA-Z0-9]{2}/g),\n        r = parseInt(hexParts[0], 16),\n        g = parseInt(hexParts[1], 16),\n        b = parseInt(hexParts[2], 16),\n        rgb = r + ',' + g + ',' + b;\n\n    return rgb;\n  }\n\n\n\n  var returnObject = {};\n\n  returnObject.pageX = getPageX;\n  returnObject.hex2rgb = hex2rgb;\n\n\n\n  return returnObject;\n}());;var menuSystem = (function(window, undefined){\n\tfunction initiatePart (partName) {\n\t\tvar eltClass = 'menu-' + partName,\n\t\t\t\telt = document.querySelector('.' + eltClass),\n\t\t\t\tpart = {},\n\t\t\t\ttoggler;\n\n\t\tpart.name = partName;\n\n\t\tif ( elt ) {\n\t\t\tpart.elt              = elt;\n\t\t\tpart.toggler          = elt.querySelector( '.toggler' );\n\t\t\tpart.optionsWrapper   = elt.querySelector( '.' + classOfOptionsWrapper(part) );\n\t\t\tpart.optionsContainer = elt.querySelector( '.' + classOfOptionsContainer(part) );\n\t\t\tpart.options          = elt.querySelector( '.' + classOfOptions(part) );\n\n\t\t\taddPartToggle(part);\n\n\t\t}\n\n\t\treturn part;\n\t}\n\n\tfunction addPartToggle (part) {\n\t\tvar togglePartFunction =  create_togglePart(part);\n\n\t\tbody.classList.add( classOfMenu(part, 'closed') );\n\n\t\tpart.toggler.addEventListener('click', togglePartFunction, false);\n\n\t}\n\n\tfunction create_togglePart(part) {\n\t\tvar closedClass = classOfMenu(part, 'closed'),\n\t\t\t\topenClass = classOfMenu(part, 'open'),\n\n\t\t\t\tclosedTest = new RegExp( closedClass );\n\n\t\treturn function(e) {\n\t\t\tif ( closedTest.test( body.className ) ) {\n\t\t\t\tbody.classList.remove(closedClass);\n\t\t\t\tbody.classList.add(openClass);\n\n\t\t\t} else {\n\t\t\t\tbody.classList.remove(openClass);\n\t\t\t\tbody.classList.add(closedClass);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction classOfMenu (part, state, type) {\n\t\treturn 'menu-' + part.name + (type ? '__' + type : '') + (state ? '--' + state : '');\n\t}\n\n\tfunction classOfOptionsWrapper (part, state) {\n\t\treturn classOfMenu(part, state, 'optionsWrapper');\n\t}\n\n\tfunction classOfOptionsContainer (part, state) {\n\t\treturn classOfMenu(part, state, 'optionsContainer');\n\t}\n\n\tfunction classOfOptions (part, state) {\n\t\treturn classOfMenu(part, state, 'options');\n\t}\n\n\tfunction checkToolsScroll (e) {\n\t\tvar optionsWrapper   = parts[0].optionsWrapper,\n\t\t\t\toptionsContainer = parts[0].optionsContainer,\n\t\t\t\toptions          = parts[0].options,\n\n\t\t\t\toptionsWidth = options.clientWidth,\n\t\t\t\toptionsContainerWidth = optionsContainer.clientWidth;\n\n\t\tif ( optionsContainer.scrollLeft < 1 ) {\n\t\t\toptionsWrapper.classList.add('atStart');\n\n\t\t} else {\n\t\t\toptionsWrapper.classList.remove('atStart');\n\t\t}\n\n\t\tif (options.clientWidth <= optionsContainer.clientWidth ||\n\t\t\t\toptionsContainer.clientWidth + optionsContainer.scrollLeft >= options.clientWidth) {\n\t\t\toptionsWrapper.classList.add('atEnd');\n\n\t\t} else {\n\t\t\toptionsWrapper.classList.remove('atEnd');\n\t\t}\n\t}\n\n\n\n\tvar body = document.body,\n\t\t\tpartNames = 'tools saves preview'.split(' '),\n\t\t\tparts = [],\n\t\t\ti,\n\n\t\t\treturnObject = {};\n\n\n\n\tfor (i=0; i<partNames.length; i+=1) {\n\t\tparts.push(\n\t\t\tinitiatePart( partNames[i] )\n\t\t);\n\t}\n\n\tcheckToolsScroll();\n\tparts[0].optionsContainer\n\t\t.addEventListener('scroll', checkToolsScroll, false);\n\twindow\n\t\t.addEventListener('resize', checkToolsScroll, false);\n\n\n\treturnObject.parts = parts;\n\n\treturn returnObject;\n\n}(window));\n\n\n\n\n// - -- --- -- - -- --- -- - -- --- -- - -- --- -- - //\n\n\n\n\n\nBJSliders\n\t.onchange(function(slider){\n\t\tdocument.querySelector('.menu-tools__options__option-size .value__number')\n\t\t\t.innerHTML = slider.value;\n\t}, 'size')\n\t.onchange(function(slider){\n\t\tdocument.querySelector('.menu-tools__options__option-opacity .value__number')\n\t\t\t.innerHTML = slider.value;\n\t}, 'opacity')\n\t.onchange(function(slider){\n\t\tdocument.querySelector('.menu-tools__options__option-maxSpacing .value__number')\n\t\t\t.innerHTML = slider.value;\n\t}, 'maxSpacing');;var dropBox = function( loadFunction ){\n\n\tfunction addDragClass(e) {\n\t\te.preventDefault && e.preventDefault();\n\t\tdropOverlay.classList.add('hover');\n\t}\n\n\tfunction removeDragClass(e) {\n\t\te.preventDefault && e.preventDefault();\n\t\tdropOverlay.classList.remove('hover');\n\t}\n\n\tfunction handleImageDrop(e) {\n\t\te.preventDefault && e.preventDefault();\n\t\tdropOverlay.classList.remove('hover');\n\n\t\t// now do something with:\n\t\tvar files = e.dataTransfer.files,\n\t\t\treader = new FileReader();\n\n\t\treader.onload = function(e){\n\t\t\tloadFunction(e);\n\t\t};\n\n\t\treader.readAsDataURL(files[0]);\n\t}\n\n\n\n\tvar returnObject = {},\n\n\t\tdoc = document.documentElement,\n\t\tdropOverlay = document.getElementById('dropOverlay');\n\n\tdoc.ondragover = addDragClass;\n\tdoc.ondragleave = removeDragClass;\n\tdoc.addEventListener( 'drop', handleImageDrop, false );\n\n\treturn returnObject;\n\n};;var artBoard = function() {\n\n\tfunction startDrawing (e) {\n\t\tbounds = canvas.getBoundingClientRect();\n\t\tvar setPoint = getPenPosition(bounds, e);\n\n\t\tbrushSize = (currentSize * canvasScale)/2;\n\t\tbrushColor = 'rgba(' + BJ.hex2rgb(currentColor) + ',' + currentOpacity + ')';\n\t\tdrawDistLimit = brushSize * (currentMaxDistance/100);\n\t\tcanvas.classList.add('drawing');\n\t\tprevPoint = setPoint;\n\n\t\tdraw(setPoint.x, setPoint.y);\n\n\t\twindow.addEventListener('mousemove', drawLine, false);\n\t\twindow.addEventListener('mouseup', endDrawing, false);\n\t}\n\n\tfunction endDrawing (e) {\n\t\twindow.removeEventListener('mousemove', drawLine, false);\n\t\twindow.removeEventListener('mouseup', endDrawing, false);\n\t\tcanvas.classList.remove('drawing');\n\n\t\tprintFullToSmall();\n\n\t\tondrawend();\n\t}\n\n\tfunction getPenPosition (target, e) {\n\t\tvar bounds\t= target.getBoundingClientRect ? target.getBoundingClientRect() : target,\n\t\t\tnewX\t= (e.clientX - bounds.left + window.scrollX)*canvasScale,\n\t\t\tnewY\t= (e.clientY - bounds.top + window.scrollY)*canvasScale;\n\n\t\treturn {\n\t\t\tx: newX,\n\t\t\ty: newY\n\t\t};\n\t}\n\n\tfunction printFullToSmall () {\n\t\tctx_default.drawImage(canvas, 0, 0, canvas_default.width, canvas_default.height);\n\t}\n\n\tfunction drawLine (e) {\n\t\tvar setPoint = getPenPosition(bounds, e),\n\t\t\tdist = {\n\t\t\t\tx:\t\tsetPoint.x - prevPoint.x,\n\t\t\t\ty:\t\tsetPoint.y - prevPoint.y,\n\t\t\t\ttotal:\tMath.pow(Math.pow(prevPoint.x - setPoint.x, 2) + Math.pow(prevPoint.y - setPoint.y, 2), 0.5)\n\t\t\t},\n\t\t\tparts = Math.ceil(dist.total/drawDistLimit),\n\t\t\tdrawPoint,\n\t\t\ti = 1;\n\n\t\tfor (; i<=parts; i++) {\n\t\t\tdrawPoint = {\n\t\t\t\tx: prevPoint.x + (dist.x/parts)*i,\n\t\t\t\ty: prevPoint.y + (dist.y/parts)*i\n\t\t\t};\n\n\t\t\tdraw(\n\t\t\t\tprevPoint.x + (dist.x/parts)*i,\n\t\t\t\tprevPoint.y + (dist.y/parts)*i\n\t\t\t);\n\t\t}\n\n\t\tprevPoint = setPoint;\n\n\t}\n\n\tfunction draw (x, y) {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, brushSize, 0, 2 * Math.PI, false);\n\t\tctx.fillStyle = brushColor;\n\t\tctx.fill();\n\t}\n\n\tfunction replaceImage (image) {\n\n\t}\n\n\tfunction loadImageFunction ( e ) {\n\t\tvar ii = new Image();\n\n\t\tii.onload = function() {\n\t\t\tctx.drawImage( ii, 0, 0, canvas.width, canvas.height );\n\t\t\tprintFullToSmall();\n\n\t\t\tondrawend();\n\t\t};\n\n\t\tii.src = e.target.result;\n\t}\n\n\tfunction addImageLoadFunction ( func, className ) {\n\t\tvar o = {\n\t\t\tfunc: func\n\t\t};\n\n\t\tif ( typeof className === 'string' ) {\n\t\t\to.className = className;\n\t\t}\n\n\t\timageUpdateFuncs.push(o);\n\t}\n\n\tfunction handleImageUpdate ( img ) {\n\t\tvar i = 0;\n\n\t\tfor (; i<imageUpdateFuncs.length; i+=1) {\n\t\t\timageUpdateFuncs[i].func( img );\n\t\t}\n\t}\n\n\tfunction createImageLink () {\n\t\tvar aaa = document.createElement('a'),\n\t\t\tiii = new Image(),\n\t\t\tdataURL = canvas.toDataURL();\n\n\t\tiii.src = dataURL;\n\n\t\taaa.href = dataURL;\n\t\taaa.appendChild(iii);\n\t\taaa.setAttribute('target', '_blank');\n\t\taaa.setAttribute('download', 'download');\n\n\t\taaa.style.display = 'block';\n\t\tiii.style.width = aaa.style.width = '100%';\n\t\tiii.style.height = 'auto';\n\n\t\timageThumbs.appendChild(aaa);\n\t}\n\n\tvar ondrawend =  (function () {\n\t\t\tvar funcs = [],\n\t\t\t\ti;\n\n\t\t\treturn function (func) {\n\t\t\t\tif (typeof func === 'function') {\n\t\t\t\t\tfuncs.push(func);\n\n\t\t\t\t} else {\n\t\t\t\t\tfor (i=0; i<funcs.length; i+=1) {\n\t\t\t\t\t\tfuncs[0]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}());\n\n\n\tvar returnObject = {},\n\t\timageUpdateFuncs = [],\n\n\t\tcanvas\t= document.getElementById('canvas'),\n\t\tcanvas_default = document.getElementById('canvas_default'),\n\t\tctx\t\t= canvas.getContext('2d'),\n\t\tctx_default = canvas_default.getContext('2d'),\n\t\tbounds\t= canvas.getBoundingClientRect(),\n\t\tcanvasScale = window.devicePixelRatio,\n\t\tcanvasContainer = canvas.parentNode,\n\n\t\tdefaultSkinSize = {\n\t\t\tx: 64,\n\t\t\ty: 32\n\t\t},\n\n\t\tpossibleCanvasScale = {\n\t\t\tx: Math.floor( canvasContainer.getBoundingClientRect().width / defaultSkinSize.x ),\n\t\t\ty: Math.floor( canvasContainer.getBoundingClientRect().height / defaultSkinSize.y )\n\t\t},\n\n\t\tcanvasSize = possibleCanvasScale.x <= possibleCanvasScale.y ?\n\t\t{\n\t\t\tx: possibleCanvasScale.x * defaultSkinSize.x,\n\t\t\ty: possibleCanvasScale.x * defaultSkinSize.y\n\t\t} :\n\t\t{\n\t\t\tx: possibleCanvasScale.y * defaultSkinSize.x,\n\t\t\ty: possibleCanvasScale.y * defaultSkinSize.y\n\t\t},\n\n\t\tbrushSize,\n\t\tbrushColor,\n\t\tdrawDistLimit,\n\t\tprevPoint,\n\n\t\tondrawendFuncs = [],\n\n\t\tdragNDrop = dropBox(loadImageFunction),\n\n\t\tcolorPicker = document.getElementById('brushColor'),\n\t\tcurrentColor = colorPicker.value,\n\n\t\tcurrentSize = 3,\n\t\tcurrentOpacity = 100,\n\t\tcurrentMaxDistance = 25,\n\n\t\timageThumbs = document.getElementById('imageThumbs');\n\n\n\tcanvas.width = canvasSize.x * canvasScale;\n\tcanvas.height = canvasSize.y * canvasScale;\n\tcanvas.style.width = canvasSize.x + 'px';\n\tcanvas.style.height = canvasSize.y + 'px';\n\tctx.webkitImageSmoothingEnabled = false;\n\n\tcanvas_default.width = defaultSkinSize.x;\n\tcanvas_default.height = defaultSkinSize.y;\n\tcanvas_default.style.width = canvas_default.width + 'px';\n\tcanvas_default.style.height = canvas_default.height + 'px';\n\t//ctx_default.webkitImageSmoothingEnabled = false;\n\n\tcanvas.addEventListener('mousedown', startDrawing, false);\n\n\n\n\treturnObject.replaceImage = replaceImage;\n\treturnObject.onimageupdate = addImageLoadFunction;\n\treturnObject.getImage = createImageLink;\n\treturnObject.ondrawend = ondrawend;\n\treturnObject.art = canvas_default;\n\n\n\tBJSliders\n\t\t.onchange(function(slider){\n\t\t\tcurrentSize = slider.value;\n\t\t}, 'size')\n\t\t.onchange(function(slider){\n\t\t\tcurrentOpacity = slider.value / 100;\n\t\t}, 'opacity')\n\t\t.onchange(function(slider){\n\t\t\tcurrentMaxDistance = slider.value;\n\t\t}, 'maxSpacing');\n\n\tcolorPicker.addEventListener('change', function() {\n\t\tcurrentColor = colorPicker.value;\n\t}, false);\n\n\n\treturn returnObject;\n\n}();\n;function buildMen(manElt, manNo) {\n\tfor (i=0; i < menElts.length; i += 1) {\n\t\tmen[i] = buildMan(menElts[i], i, imageElt);\n\t}\n};\n\nfunction buildMan(manElt, manNo, img) {\n\tvar man = men[manNo] || {\n\t\t\timg: img,\n\t\t\telt: manElt,\n\t\t\tpartElts: manElt.querySelectorAll('part'),\n\t\t\tparts: [],\n\t\t\tno: manNo,\n\t\t\ttimesBuilt: 0,\n\n\t\t\trot: {\n\t\t\t\ty: 45,\n\t\t\t\tySpd: 3,\n\n\t\t\t\tx: 0,\n\t\t\t\txSpd: 3\n\t\t\t}\n\t\t},\n\t\ti = 0;\n\tman.timesBuilt += 1;\n\n\tfor (; i < man.partElts.length; i += 1) {\n\t\tman.parts[i] = buildPart(man, i);\n\t}\n\n\tif (man.timesBuilt <= 1) {\n\t\tmoveMan(man, true);\n\t}\n\n\treturn man;\n\n};\n\nfunction buildPart(man, partNo) {\n\tvar partElt = man.partElts[partNo],\n\n\t\tpartPositions= [\n\t\t\t{sx:1,  x:0, y:-12, z:0, ox:0, oy:0, oz:0},\n\t\t\t{sx:1,  x:0, y:-2, z:0, ox:0, oy:0, oz:0},\n\t\t\t{sx:1,  x:-6, y:-2, z:0, ox:2, oy:-6, oz:0},\n\t\t\t{sx:-1, x:-6, y:-2, z:0, ox:2, oy:-6, oz:0},\n\t\t\t{sx:1,  x:-2, y:10, z:0, ox:2, oy:-6, oz:0},\n\t\t\t{sx:-1, x:-2, y:10, z:0, ox:2, oy:-6, oz:0}\n\t\t],\n\n\t\tpart = {\n\t\t\telt: partElt,\n\n\t\t\tjoint: partElt.getElementsByTagName('joint')[0] || document.createElement('joint'),\n\n\t\t\tfaces: [\n\t\t\t\t// front,\n\t\t\t\t// back,\n\t\t\t\t// right,\n\t\t\t\t// left,\n\t\t\t\t// top,\n\t\t\t\t// bottom\n\t\t\t],\n\n\t\t\twidth: partElt.getAttribute('width') * scaler,\n\t\t\theight: partElt.getAttribute('height') * scaler,\n\t\t\tdepth: partElt.getAttribute('depth') * scaler,\n\n\t\t\timg: man.img,\n\n\t\t\tno: partNo,\n\n\t\t\tposition: partPositions[partNo]\n\t\t},\n\n\t\ti=0;\n\n\tpart.elt.style[tf] =\t'scaleX(' + part.position.sx + ')' +\n\t\t\t\t\t\t\t'translateX(' + (part.position.x * scaler) + 'px)' +\n\t\t\t\t\t\t\t'translateY(' + (part.position.y * scaler) + 'px)' +\n\t\t\t\t\t\t\t'translateZ(' + (part.position.z * scaler) + 'px)';\n\n\tpart.joint.innerHTML = '';\n\tpart.joint.style[tfo] =\t(part.position.ox * scaler) + 'px ' +\n\t\t\t\t\t\t\t(part.position.oy * scaler) + 'px ' +\n\t\t\t\t\t\t\t(part.position.oz * scaler) + 'px';\n\n\tfor (; i<6; i+=1) {\n\t\tpart.faces[i] = buildFace (man, part, i);\n\t}\n\n\tpart.elt.appendChild(part.joint);\n\n\treturn part;\n\n}\n\nfunction buildFace (man, part, faceNo) {\n\tvar joint = part.joint,\n\n\t\ttranslates = [\n\t\t\t'translate3d(' + (-part.width/2 + 'px, ' + -part.height/2 + 'px, '+part.depth/2+'px') + ')',\n\t\t\t'translate3d(' + (-part.width/2 + 'px, ' + -part.height/2 + 'px, -'+part.depth/2+'px') + ')',\n\t\t\t'translate3d(' + (-part.width/2 - part.depth/2 + 'px, ' + -part.height/2 + 'px, 0') + ')',\n\t\t\t'translate3d(' + (part.width/2 - part.depth/2 + 'px, ' + -part.height/2 + 'px, 0') + ')',\n\t\t\t'translate3d(' + (-part.width/2 + 'px, ' + (-part.depth/2-part.height/2) + 'px, 0') + ')',\n\t\t\t'translate3d(' + (-part.width/2 + 'px, ' + (part.height/2-part.depth/2) + 'px, 0') + ')'\n\t\t],\n\n\t\trotates = [\n\t\t\t'',\n\t\t\t'rotateY( 180deg )',\n\t\t\t'rotateY( -90deg )',\n\t\t\t'rotateY(  90deg )',\n\t\t\t'rotateX(  90deg )',\n\t\t\t'rotateX( -90deg )'\n\t\t],\n\n\t\tdraws = [\n\t\t\t[ // head\n\t\t\t\t[8,8], // front\n\t\t\t\t[24,8], // back\n\t\t\t\t[0,8], // right\n\t\t\t\t[16,8], // left\n\t\t\t\t[8,0], // top\n\t\t\t\t[16,0] // bottom\n\t\t\t],\n\t\t\t[ // body\n\t\t\t\t[20,20],\n\t\t\t\t[32,20],\n\t\t\t\t[16,20],\n\t\t\t\t[28,20],\n\t\t\t\t[20,16],\n\t\t\t\t[28,16]\n\t\t\t],\n\t\t\t[ // left arm\n\t\t\t\t[44,20],\n\t\t\t\t[52,20],\n\t\t\t\t[40,20],\n\t\t\t\t[48,20],\n\t\t\t\t[44,16],\n\t\t\t\t[48,16]\n\t\t\t],\n\t\t\t[ // right arm\n\t\t\t\t[44,20],\n\t\t\t\t[52,20],\n\t\t\t\t[40,20],\n\t\t\t\t[48,20],\n\t\t\t\t[44,16],\n\t\t\t\t[48,16]\n\t\t\t],\n\t\t\t[ // left leg\n\t\t\t\t[4,20],\n\t\t\t\t[12,20],\n\t\t\t\t[0,20],\n\t\t\t\t[8,20],\n\t\t\t\t[4,16],\n\t\t\t\t[8,16]\n\t\t\t],\n\t\t\t[ // right leg\n\t\t\t\t[4,20],\n\t\t\t\t[12,20],\n\t\t\t\t[0,20],\n\t\t\t\t[8,20],\n\t\t\t\t[4,16],\n\t\t\t\t[8,16]\n\t\t\t]\n\t\t],\n\n\t\tcanvas = document.createElement('canvas');\n\n\t\tface = {\n\t\t\telt: canvas,\n\t\t\tctx: canvas.getContext('2d'),\n\n\t\t\twidth:  faceNo<2 ? part.width :\n\t\t\t\t\tfaceNo<4 ? part.depth :\n\t\t\t\t\tpart.width,\n\n\t\t\theight: faceNo<2 ? part.height :\n\t\t\t\t\tfaceNo<4 ? part.height :\n\t\t\t\t\tpart.depth,\n\n\t\t\ttranslate: translates[faceNo],\n\t\t\trotate: rotates[faceNo]\n\t\t};\n\n\tface.elt.style.cssText =  \tpf + 'transform-origin:' + face.width/2 + 'px ' + face.height/2 + 'px;' +\n\t\t\t\t\t\t\t\tpf + 'transform: ' + face.translate + ' ' + face.rotate + ';' +\n\t\t\t\t\t\t\t\t'width: ' + face.width + 'px;height: ' + face.height + 'px;';\n\n\tcanvas.width = (face.width*ctxResolution)/scaler;\n\tcanvas.height = (face.height*ctxResolution)/scaler;\n\tface.ctx.imageSmoothingEnabled = false;\n\n\tface.ctx.drawImage(man.img, draws[part.no][faceNo][0], draws[part.no][faceNo][1], face.width/scaler, face.height/scaler, 0, 0, canvas.width, canvas.height);\n\n\tjoint.appendChild(face.elt);\n\n\treturn face;\n\n}\n\nfunction moveMan (part, force) {\n\tvar defaultMove = 'translateY(' + 0*scaler + 'px) ';\n\n\tforce = force ? true : false;\n\n\tif (rotateXOn || rotateYOn || force) {\n\t\tif (rotateXOn) {\n\t\t\tpart.rot.y += part.rot.ySpd * rotateXOn;\n\t\t}\n\t\tif (rotateYOn) {\n\t\t\tpart.rot.x += part.rot.xSpd * rotateYOn;\n\t\t}\n\t\tpart.elt.style[ tf ] = defaultMove + 'rotateY(' + part.rot.y + 'deg) rotateX(' + part.rot.x + 'deg)';\n\t}\n\n\trequestAnimationFrame(function(){\n\t\tmoveMan (part);\n\t});\n}\n\n\n\nfunction setAnimation () {\n\tif ( /\\bwalking\\b/.test( document.body.className ) ) {\n\t\tdocument.body.classList.remove('walking');\n\t\tdocument.body.classList.add('running');\n\n\t} else if ( /\\brunning\\b/.test( document.body.className ) ) {\n\t\tdocument.body.classList.remove('running');\n\n\t} else {\n\t\tdocument.body.classList.add('walking');\n\t}\n}\n\n\n\nvar menElts = document.querySelectorAll('man'),\n\tmen = [],\n\ti = 0,\n\tctxResolution = 8,\n\tscaler = 9,\n\n\trotateXOn = 0,\n\trotateYOn = 0,\n\n\timageElt,\n\n\ttf, prefix;\n\nif ( typeof document.body.style.transform === 'string' ) {\n\ttf = 'transform';\n\ttfo = 'transformOrigin';\n\tpf = '';\n} else if ( typeof document.body.style.WebkitTransform === 'string' ) {\n\ttf = 'WebkitTransform';\n\ttfo = 'WebkitTransformOrigin';\n\tpf = '-webkit-';\n} else {\n\ttf = '';\n\tpf = '';\n};\n\n\n\n\nwindow.onkeydown = function(e) {\n\tvar didSomething = false;\n\n\tif ( e.which === 39 ) {\n\t\trotateXOn = 1;\n\t\tdidSomething = true;\n\n\t} else if ( e.which === 37 ) {\n\t\trotateXOn = -1;\n\t\tdidSomething = true;\n\n\t} else if ( e.which === 40 ) {\n\t\trotateYOn = -1;\n\t\tdidSomething = true;\n\n\t} else if ( e.which === 38 ) {\n\t\trotateYOn = 1;\n\t\tdidSomething = true;\n\n\t} else if ( e.which === 32 ) {\n\t\tsetAnimation();\n\t\tdidSomething = true;\n\n\t}\n\n\tif ( didSomething ) e.preventDefault();\n}\nwindow.onkeyup = window.ontouchend = window.onmouseup = window.onmouseleave = function(e) {\n\trotateXOn = 0;\n\trotateYOn = 0;\n}\n\n\n\ndocument.getElementsByClassName('func')[0].ontouchstart =\ndocument.getElementsByClassName('func')[0].onmousedown  = function(e) {\n\te.preventDefault();\n\tsetAnimation();\n}\n\ndocument.getElementsByClassName('up')[0].ontouchstart =\ndocument.getElementsByClassName('up')[0].onmousedown = function(e) {\n\te.preventDefault();\n\trotateYOn =  1;\n}\ndocument.getElementsByClassName('down')[0].ontouchstart =\ndocument.getElementsByClassName('down')[0].onmousedown = function(e) {\n\te.preventDefault();\n\trotateYOn = -1;\n}\ndocument.getElementsByClassName('left')[0].ontouchstart =\ndocument.getElementsByClassName('left')[0].onmousedown = function(e) {\n\te.preventDefault();\n\trotateXOn = -1;\n}\ndocument.getElementsByClassName('right')[0].ontouchstart =\ndocument.getElementsByClassName('right')[0].onmousedown = function(e) {\n\te.preventDefault();\n\trotateXOn =  1;\n}\n//# sourceMappingURL=main.js.map"]}